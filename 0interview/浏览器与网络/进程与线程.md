## 进程与线程

https://segmentfault.com/a/1190000012925872

- 进程就像一个工厂，工厂有自己的独立资源（系统分配的一块独立的内存）
- 工厂之间相互独立（进程之间相互独立，比如浏览器的tab页之间互不影响）
- 线程是工厂内的工人，多个工人协同完成工作（多个线程在进程中协作完成工作）
- 工厂内有一个或多个工人（一个进程由一个或多个线程组成）
- 工人之间共享空间（同一进程下的各个线程之间共享程序的内存空间）
- 进程是CPU资源分配的最小单位
- 线程是CPU调度的最小单位



### 浏览器是多进程的

浏览器包含了哪些进程：

1. Browser进程：浏览器的主进程，负责协调主控，比如浏览器界面显示，与用户交互，负责各个页面的管理，网络资源的管理
2. 第三方插件进程：每种类型的插件对应一个进程，仅当使用该插件时才创建
3. GPU进程：最多一个，用于3D绘制
4. 浏览器渲染进程（浏览器内核）：默认每个Tab页一个进程，互不影响 **最重要的**

有时浏览器也会将多个进程合并，比如打开多个空白页会合并成一个



## 重点是浏览器渲染进程

页面渲染，JS执行，event loop都是在这个进程中执行

该进程包括以下线程：

1. GUI渲染线程（也是渲染引擎）：解析HTML,CSS,构建DOM数和renderObject树，布局和绘制，重绘和回流，该线程与JS引擎线程互斥，也就是常说的chrome的webkit（现在是blink），火狐的Gecko，ie是trident。
2. JS引擎线程：也被称为JS内核，负责处理js脚本，它一直等待着任务队列中的任务，一个Tab页中无论什么时候都只有一个JS线程在运行JS程序，js执行时间过长，会造成页面渲染不连贯
3. 事件触发线程：该线程归属于浏览器而不是JS引擎，用来控制时间循环，当JS引擎执行定时器，或者ajax时，会将对应任务添加到事件线程中，当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理
4. 定时触发器线程：setTimeOut，setInterval
5. 异步http请求线程