# 作用域

作用域就是[[scope]]，每个js函数都是一个对象，对象中有些属性我们可以访问，有些不可以，这些属性仅供js引擎存取，[[scope]]就是其中一个，它存储了运行期上下文的集合

## 什么是作用域链

作用域链指的就是[[scope]]中存储的执行器上下文对象的集合，这个集合是链式连接的，我们管这种链式连接叫做作用域链。

JavaScript属于静态作用域，即声明的作用域是根据程序正文在编译时就确定的，有时也称为词法作用域。

其本质是JavaScript在执行过程中会创造可执行上下文，可执行上下文中的词法环境中含有外部词法环境的引用，我们可以通过这个引用获取外部词法环境的变量、声明等，这些引用串联起来一直指向全局的词法环境，因此形成了作用域链。

## 什么是执行期上下文

当函数执行的前一刻，会创建一个被称为执行期上下文（AO）的内部对象，它定义了这个函数执行时的环境，多次调用一个函数会创建多个执行期上下文，当函数运行完毕，它所产生的执行其上下文会被销毁。



```javascript
function a() {
    function b() {
		var b = 234
    }
    var a = 123
    b()
}
var glob = 100
a()

//a被定义时：a.[[scope]]内的作用域链 0：GO{}
//a被执行时：a.[[scope]]内的作用域链 0：AO{} -> :1：GO{}
//b被定义时：b.[[scope]]内的作用域链 0：a的AO{} -> :1：GO{} 其实就是a被执行时的作用域链
//b被执行时：b.[[scope]]内的作用域链 0：b的AO{} -> 1：a的AO{} ->2：GO{} :
```

![](D:\GitHub\codingStudy\0interview\JS\zyyl.png)